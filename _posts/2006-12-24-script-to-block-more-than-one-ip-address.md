---
title: "سكربت حجب أكثر من IP"
date: 2006-12-24 20:54:56 -0500
categories: ["Linux Security"]
permalink: "/2006/12/24/script-to-block-more-than-one-ip-address/"
reading_time: 2
---

السلام عليكم ورحمة الله وبركاته …

كان المفروض أن تكون أول سكربت أضعها هنا هي السكربت التي عملتها لتنصيب السكويد وإعداداته والفايروول وإعدادته … لكن شاء القدر أن أنسى السكربت على في حاسوب مكتبي … لهذا ستكون هذه أول سكربت لي هنا … وهي عبارة عن سكربت بسيطة جدا تقوم بإضافة القوانين الازمة لحجب عدد كبير من الــ IP الى الــ iptables الخاصة بالفايروول …

فقط اتبع الخطوات التي أكتبها …

1- أعمل ملف لنضع فيه الــ IP التي نريد حجبها …

touch bannedIP

2- بعد ذلك أفتح الملف وضع في الــ IP التي تريد حجبها …

222.12.4.5

123.44.6.66

234.3.3.2

234.34.34.34

3- الأن قم بإنشاء ملف وضع فيه التالي:

BLOCKIP=”/pathto/bannedIP”

IP=$(grep -Ev “^#” $BLOCKIP)

for i in $IP

do

iptables -A INPUT -s $i -j DROP

iptables -A OUTPUT -d $i -j DROP

done

iptables-save

4- أحفظ الملف بأي اسم تريد وليكن banIP …

5- بعد ذلك نفذ التالي: chmod 700 banIP

6- بعد ذلك للتنفيذ أعمل التالي: ./banIP

مبروك الحين أصبح يعمل حجب للــ IP الموجودة في الملف bannedIP …

فما سيقوم به هو التالي:

iptables -A INPUT -s 222.12.4.52 -j DROP

iptables -A OUTPUT -d 222.12.4.5 -j DROP

ملاحظة :-

1- هذه الأرقام للتجربة فقط وهي غير حقيقة …

2- لو كنت تستعمل توزيعة فيدورا أو ريدهات فقط ضع service iptables save بدل من سطر iptables-save الموجودة داخل السكربت …

أخوكم B!n@ry …
