---
title: "كيف أقوم بتشغيل سكربت معيين لحظة تفعيل الـ eth0"
date: 2007-05-24 09:42:59 -0500
categories: ["Linux Services"]
permalink: "/2007/05/24/howto-run-a-script-when-eth0-goes-up/"
reading_time: 2
---

السلام عليكم ورحمة الله وبركاته …

بعض المرات هناك إعدادات معينة تحب تشغيلها عند أول عملية تفعيل enable لكارت الشبكة، في السابق كنت أقوم بذلك من خلال إستعمال سكربت أقوم بتشغيله بيدي ولكن مع التكرار للحدث وممكن تنسى أصلاً وجدت طريقة لعمل ذلك … حيث كنت سابقاً أنفذ التالي:

```
rul3z:~ # /root/config/fw.sh
```

بعد قراءة كل من man ifconfig و man ifcfg وجدت خيار إسمه post-up … حيث يساعدني هذا الخيار على تحديد ملف تشغيلي لتنفيذه حال تفعيل كارت الشبكة eth0 مثلاً … فقط تابع الطريقة لمعرفة كيف تعمل ذلك … قم بنسخ الملف /root/config/fw.sh الى المجلد

```
/etc/sysconfig/network/if-up.d/
```

```
rul3z:~ # mv /root/config/fw.sh /etc/sysconfig/network/if-up.d/
```

هذا المجلد في كل من توزيعة openSuSE وال SLES أما في توزيعات أخرى أظن مكانه هو /etc/network/if-up.d/

بعد ذلك قم بتحرير ملف الإعدادات الخاصة بكارت الشبكة لديك. في openSuSE هو:

```
rul3z:~ # vi /etc/sysconfig/network/ifcfg-eth-id-00\:22\:44\:a5\:bc\:22
```

طبعاً للتنويه فقط الإسم ifcfg-eth-id-00\:22\:44\:a5\:bc\:22سيختلف من جهاز الى آخر وذلك ﻷنه الأرقام بالأخير تمثل الـ MAC Address لكارت الشبكة الذي لديك … طبعاً هذا ليس رقم كارتي ::18

الآن نعمل الإعدادات الخاصة بالخيار post-up … فقط قم بإضافة السطر التالي الى ملف الإعدادات نفسه:

```
post-up /etc/sysconfig/network/if-up.d/fw.sh
```

حيث كما ذكرت سابقاً الخيار post-up سيقوم بتنفيذ الأمر أو السكربت بعد تفعيل كارت الشبكة مباشرة … الآن قم بتخزين SAVE للملف ومن ثم أعد تشغيل كارت الشبكة مرة أخرى لتفعيل وتشغيل السكربت الذي وضعناه لكي يعمل عند بداية تفعيل كارت الشبكة.

```
rul3z:~ # /etc/init.d/network restart
```

هذا في openSuSE أما في التوزيعات مثل RedHat أو Fedora فيمكن القيام بالتالي:

```
service network restart
```

من الأمور التي ستفيدك هذه الطريقة هي تفعيل بعض الأمور الخاصة بالجدار الناري Firewall عند أول تفعيل لكارت الشبكة.

لمزيد من المعلومات والخيارات تابع هذين:

```
man ifconfig
```

و

```
man ifcfg
```

أخوكم B!n@ry …
