---
title: "طريقة عمل تنصيب Setup لنظام ال SmoothWall"
date: 2008-10-02 01:46:26 -0500
categories: ["Linux Services"]
permalink: "/2008/10/02/howto-setup-and-use-smoothwall/"
reading_time: 12
---

السلام عليكم ورحمة الله وبركاته

![](/assets/img/posts/2008/smoothwall.gif)

أخوتي الأعزاء الموضوع هذا كتبته أيام موقع عرب نيكس واليوم وجدته بالصدفة فقلت أضيفه لكم لعلكم تستفيدون منه … لقراءة الموضوع بالصور، قم بتحميل الملف التالي:[أضغط هنا](/assets/files/2008/SmoothWall.pdf) أو قم بمتابعة الشرح من هنا بكامل تفاصيله.

يعتبر نظام اللينكس SmoothWall من أفضل الأنظمة التي تعمل كجدار ناري أو كموزع لل IP Addresses أو مزود خدمة ال DNS وغيرها الكثير من الخدمات وذلك لسهولة تنصيبه وسهولة التعامل معه وهذا ما سأقوم بوضعه في هذا الموضوع. الموضوع هذا سيبدأ من مرحلة التنصيب وينتهي بمرحلة الإعدادات الكاملة للنظام لكي يعمل في بيئتك الخاصة

بحيث يمكن وضعه كما يلي:

![](/assets/img/posts/2008/smoothwall1.jpg)

أو كما في الصورة التالية:

![](/assets/img/posts/2008/smoothwall2.jpg)

(1) قم بتشغيل الجهازالذي سنقوم بتنصيب ال Smoothwall عليه.

(2)أدخل القرص المدمج CD بداخل مشغل الأقراص CDROM. تأكد من كون ال BIOS يقرأ من ال CDROM قبل القرص الصلب HardDisk.

(3)ستظهر لك الآن شاشة ترحيبية خاصة بالنظام SW وتحذرك إنه سيقوم النظام بحذف جميع المحتويات الموجودة على القرص الصلب HD من ملفات الى غير ذلك. أيضاً في نفس هذه الشاشة للإستمراروأنت على السطر boot: أضغط على المفتاح Enter الموجود على لوحة المفاتيح.

(4)الآن ستظهر لك شاشة ترحيبية أخرى خاصة بالنظام SW ويوجد عليها خيار OK أضغط عليه للإستمرار.

(5)الآن ستظهر لك شاشة فيها خيارين الأول القرص المدمج CD والثاني سيرفر HTTP هنا سنقوم بإختيار طريقة التنصيب ومن أين نريد القيام بذلك. أضغط على CD ومن ثم أضغط على OK للإستمرار.

(6)سيطلب منك إدخال قرص ال SW أدخله وأضغط على OK للإستمرار. (مع العلم القرص لا يزال داخل الجهاز).

(7)ستظهر لك الآن شاشة الحين تخبرك بإنه سيقوم البرنامج التنصيبي في مسح جميع البيانات على الجهاز ويقوم بتقسيم القرص الصلب HD الى طريقة تتلائم مع طبيعة عمل النظام. أضغط على OK للإستمرار.

(8)هنا تظهر لك شاشة تحذيرية نهائية بإنه سيتم الحذف ويطلب منك التأكيد على ذلك. أضغط على OK لتأكيد الحذف والإستمرار في التنصيب.

(9)الآن سيطلب منك تعريف كارت الشبكة NIC الذي سيكون مربوط مع الشبكة الداخلية. هنا يوجد خيارين:

a.الأول probe: قم بالضغط عليه لكي يحاول النظام أن يتعرف على كارت الشبكة تلقائيا في حالة عدم تمكنه من تعريفها أذهب الى الخيار الثاني.

b.الثاني Select: هنا تقوم أنت بإختيار نوع الكارت الخاص بالشبكة والتعريفات اللازمة له يدويا وليس تلقائيا مثل الخيار الأول. لا ينصح أختيار هذا الخيار إلا بعد أن فشل النظام في التعريف عليه في الخيار السابق.

(10) سنكمل الشرح على إنك أخترت الخيار الأول وتم التعرف على كل الأمور وكل شيء تمام.

(11)هنا تظهر لك شاشة فيها جميع المعلومات التي تخص كارت الشبكة الخاص بك. قم بالضغط على OK للإستمرار.

(12)ستظهر لك شاشة أخرى فيها معلومات كارت الشبكة مع رقم ال MAC Address الخاص بها. قم بالضغط على OK للإستمرار.

(13)ستظهر لك شاشة تطلب منك إدخال رقم ال IP الذي سوف تستعمله على كارت الشبكة الذي قمنا بتعريفه في الخطوات السابقة. ضع رقم ال IP الخاص بك + ال Network Mask الخاص بنفس ال IP. هذا الكارت هو الكارت الأخضر, سيتم ذكر كلمة أخضر وأحمر كثيرا في هذا الشرح. الأخضر هو كارت الشبكة الخاص بالشبكة الداخلية, والأحمر هو الخاص بالشبكة الخارجية. ثم أضغط على OK للإستمرار.

أليك بعض الأمثلة عن ال IP Address وال Network Mask:

IP Address1: 192.168.0.1 Network Mask1: 255.255.255.0

IP Address2: 172.16.0.10 Network Mask2: 255.255.0.0

IP Address3: 10.0.0.200 Network Mask3: 255.0.0.0

(14)الآن أنتظر لأنه يقوم النظام بنقل الملفات وتنصيب النظام من القرص المدمج CD.

(15)الآن يخبرك إنه تم إنتهاء عملية تنصيب النظام. يرجى إخراج القرص المدمج CD من مشغل الأقراص ال CDROM والضغط على OK للإستمرار.

ملاحظة:-

سيقوم النظام بإعادة تشغيل لنفسه وبعد ذلك يمكنك من عمل الإعدادات الخاصة بالشبكة الخاصة بك من خلال الدخول على النظام بواسطة أحد الروابط التالية:

http://smoothwall_IP:81 أو من خلال الرابط التالي: http://smoothwall_IP:441

أرجوا أن تقوموا بحفظ هذه الروابط لكي تتمكن من الوصول الى النظام من خلالهم لعمل باقي الإعدادات أو الإعدادات المتقدمة.

(16)الآن ستظهر شاشة تسألك إن كان لديك نسخة إحتياطية من إعدادات نظام ال SW سابق موجودة لديك على floppy. بما إنه هذه أول عملية تنصيب لك فإنه لا وجود لهذه الإعدادات عندكم فقم بإختيار No للإستمرار.

(17)الآن يسألك عن إعدادات لوحة المفاتيح ال keyboard أتركه كما هو أو عدله الى ما تريد وما يتلائم مع لوحة المفاتيح لديك. أضغط على OK للإستمرار.

(18)الآن أدخل الأسم الذي تريده يكون أسم الجهاز ال hostname الخاص بالجهاز. أي الأسم الذي سيتم التعرف عليه من خلاله على مستوى الشبكة. أو أتركه كما هو وإضغط على OK للإستمرار.

(19)الآن يطلب منك إعدادات ال proxy لكي يتمكن من عمل تحديث للقائمة الخاصة به في المستقبل. إذا لم تكن تستعمل proxy فأتركه فراغ وأضغط على OK للإستمرار. أو ضع رقم ال IP الخاص بسيرفر ال proxy أو إسمها مع رقم المنفذ ال port الذي من خلاله تصل الى الأنترنت, ومن ثم أضغط على OK للإستمرار.

(20)إذا كان نوع خط الأنترنت هو ISDN قم بعمل الإعدادات الخاصة به, إن لم يكن كذلك قم بالضغط على Disable ISDN للإستمرار.

(21)الآن ستظهر لك شاشة إعدادات خط الأنترنت من نوع ADSL. إذا كان لديك خط ADSL أضغط على Device Type ومن ثم على OK لكي تختار نوع المودم modem أو الراوترRouter سميه ما شئت من بين قائمة أنواع الأجهزة الخاصة بمثل هذا الربط, ومن ثم أضغط على OK لترجع الى القائمة السابقة الخاصة بال ADSL. بعد ذلك قم بعمل Enable ADSL لينقلك الى الصفحة اللاحقة.

**ملاحظة:-**

نحن لن نختار هذا الخيار بل سنقوم بإختيار Disable ADSL لأنه هذا الكتيب يوضح تنصيب بدون هذا النوع ولكن ليس بالفرق الكبير بين وجوده وعدمه.

(22)الآن ستظهر لك صفحة Network Configuration Menu الخاصة بإعدادات الشبكة.

يوجد هنا عدة خيارات. أذهب الى الخيار الأول الذي أسمه: Network Configuration Type وأضغط عليه لكي نذهب الى الصفحة الخاصة بإختيار نوعية الشبكة. هنا ستظهر لك الخيارات التالية:

1-Green (Red is modem/ISDN)

2-Green + Orange (Red is modem/ISDN)

3-Green + Red

4-Green + Orange + Red

سنأتي الآن الى توضيح كل واحد من هذه الخيارات:

الخيار الأول: يعني إنه لديك كارتين شبكة 2NIC’s على الجهاز الأخضر هو الشبكة الداخلية والمقصود بها كارت الشبكة المربوط على الشبكة الداخلية LAN. الأحمر هنا هو الكارت المربوط على الأنترنت من خلال modem أو ISDN أو ADSL.

الخيار الثاني: يعني وجود ثلاث كرت شبكة على الجهاز 3NIC’s الأخضر هو الشبكة الداخلية, والبرتقالي هو ال (DMZ) Demetrolized Zone لا علاقة لكم بهذا الخيار ولا مجال لذكر توضيح عليه هنا. الأحمر هنا هو الكارت المربوط على الأنترنت من خلال modem أو ISDN أو ADSL.

الخيار الثالث: هنا الأخضر هو كارت الشبكة الداخلية كالعادة والأحمر هو الكارت الذي سيتم ربطه الى العالم الخارجي من خلال رقم IP خارجي أو ما يسمى Public IP والرقم هذا ثابت من خلاله تصل الأنترنت, وتكون أخذته من مزود ال IP مع معلومات أخرى.

الخيار الرابع: الكارت الأخضر هو الشبكة الداخلية كالعادة والكارت البرتقالي هنا هو ال DMZ كالعادة والأحمر هو الكارت الذي سيتم ربطه الى العالم الخارجي من خلال رقم IP خارجي أو ما يسمى Public IP والرقم هذا ثابت من خلاله تصل الأنترنت, وتكون أخذته من مزود ال IP مع معلومات أخرى. لا تنسى هذا فقط عندما يكون لديك ثلاث كارت شبكة واحد أحمر وأخضر وبرتقالي.

ملاحظة:-

الآن بعد أن وضحنا جميع الخيارات أضغط على الخيار الثالث لإكمال عملية الإعدادات المطلوبة لدينا. لا تنسى الخيار الثالث أسمه Green + Red.

(23)الآن بعد أن قمنا بإختيار الخيار الثالث في الخطوة السابقة عدنا الى الصفحة الرئيسية الخاصة بإعدادات الشبكة. قم بإختيار الخيار الثاني الآن الذي أسمه:

Drivers & Card assignments

(24)هنا سيخبرك بإنه تم التعرف على كارت الشبكة من نوع كذا ويسألك هل تريد تغيير هذه الإعدادات ؟؟؟ أضغط على OK. بعد ذلك تظهر لك شاشة تقول لك لم يعد هناك كارت شبكة آخر لكي يتم تعريفه, هل تريد تعريف كارت آخر لم يتمكن النظام من إكتشافه ؟ أختار أولا probe لكي نستمر بالإعدادات.

(25)الآن ستظهر لديك شاشة جديدة تخبرك بإنه تم التعرف على كارت الشبكة من نوع X. سيقوم بسؤالك هل تريد إستخدام هذا الكارت أم أختيار واحد آخر ؟ أضغط على OK وليس على SKIP لنكمل العملية.

(26)الآن ستظهر لك شاشة جديدة أخرى تخبرك إنه الكارت X الذي تم التعرف عليه من قبل النظام في الخطوة السابقة سيتم تعيين اللون “أحمر” له. لا تنسى اللون أحمر يمثل الكارت المربوط مع العالم العالم الخارجي مباشرة من خلال ال Public IP الذي لديك. أضغط على OK للإستمرار.

(27)الآن ستظهر لك رسالة تخبرك بإنه جميع كرت الشبكة تم التعرف عليهم بنجاح. أضغط على OK للإستمرار.

(28)الآن عدنا مرة أخرى الى شاشة إعدادات الشبكة الرئيسية مرة أخرى. أذهب الى الخيار الثالث الذي إسمه: Address Settings وأضغط على OK لكي نقوم بإعداد ال IP لكل كارت من كارت الشبكة ونقصد الأحمر والأخضر.ط

(29)الآن ستظهر لك شاشة جديدة فيها خيارين فقط Green و Red أضغط أولا على Green ومن ثم على OK لكي نعمل إعدادات له.

(30)الآن ستظهر لك شاشة تحذير, تقول لك إنه إذا كنت تقوم بهذه العملية Remotely أي إنك داخل على النظام من بعد فإن عملية تغيير لل IP هنا ستوقف إتصالك بالنظام وستحتاج الى عملية إعادة الشبك على النظام من خلال ال IP الجديد الذي ستقوم بوضعه الآن.

**ملاحظة:-** في بداية التنصيب وضعنا ال IP للكارت الذي سيعمل على إنه اللون الأخضر والمربوط مع الشبكة الداخلية في الفقرة (13) من هذا الشرح. يمكن تغيير رقم ال IP هذا هنا أو أتركه كما هو إن كنت متأكد من صحة رقم ال IP هذا الذي سيكون مربوط مع الشبكة الداخلية LAN. أضغط على OK للإستمرار.

(31) ستظهر لك صفحة جديدة ضع داخل الخانة الاولى رقم الip الخاص بالشبكة الداخلية وفي الخانة الثانية رقم ال network mask الخاص بتلك ال ip وكما اوضحت لكم بعض الامثلة في الخطوة 13 صفحة 2 ومن ثم اضغط على ok للاستمرار

(32) عدنا الى الشاشة التي فيها خيار red ,green الان قم باختيار red والضغط على ok للاستمرار

(33) هنا ستظهر لك شاشة جديدة تريد منك معلومات عن الكارت الاحمر الذي سيعمل ويكون المنفذ الى العالم الخارجي هنا توجد عدة خيارات:

```
-Static
-DHCP
-PPPOE
```

# قم باختيار static لكي يكون لديك IP ثابت وهذا المفروض موجود لديك (Public IP)

# بعد ذلك اترك اسم dhcp hostname كما هو الا اذا كنت تريد اسم اخر لكن عليك حفظه وتذكره لاحقا. ضع الان رقم ال IP الخارجي لديك مع الNetwork Mask الخاص بك واضغط على OK للاستمرار.

(34) الان عدنا الى صفحة الخيارات green , red بما انه تمت عملية تعريف جميع الامور ونقصد تعريف الكارت الذي سيكون red وتعريف الكارت الذي سيكون green اضغط على Done للاستمرار.

(35) الان رجعنا الى صفحة اعدادات الشبكة الرئيسية اذهب الى الخيار الرابع والذي اسمه :

Dns& gateway setting واضغط على ok للاستمرار

(36) ستظهر لك صفحة فيها ثلاث خانات :

Primary DNS: ضع رقم ال IP الخاص بال DNS

Secondary DNS: ضع رقم ال IP الخاص بال DNS الإحتياطي.

Default Gateway: ضع رقم ال IP الخاص بالمنفذ الرئيسي gateway.

ومن ثم أضغط على OK للإستمرار. هنا تضع ال DNS الخاصة بالشركة المزودة لل IP الخارجي الذي لديك, والذي سيوضع على كارت الشبكة الأحمر.

(37) سنعود الى القائمة الرئيسية الآن بعد التأكد من وضع كل شيء تمام أضغط على الخيار Done للإستمرار.

38) الآن ستظهر لك صفحة تخبرك إن كنت تريد تعريف النظام بأن يعمل عليه خدمة ال DHCP. إن كنت تريد ذلك أضغط على [] Enable من خلال لوحة المفاتيح لكي يصبح كالتالي:

[X] Enable

(39) في حالة تريد عملها كسيرفر DHCP فأليك التوضيح على ذلك:

– Start address: هو أول رقم IP في السلسلة التي سيتم إعطاءه الى الأجهزة عندما تطلب الأجهزة من خدمة ال DHCP أن يزودها بمعلومات عن ال IP لها وبمعلومات الشبكة الأخرى. مثال على ذلك: أبدأ توزيع ال IP الذي رقمه 100.22.1.150 الى أن تصل الى ال IP رقم 100.22.1.250 والذي سيكون أسمه ال End address.

– Primary DNS: ضع رقم الجهاز الذي يعطي ويزود خدمة ال DNS التي تمكنك الوصول الى الأنترنت أو الوصول الى الأجهزة من خلال اسمائها وليس أرقام IP’s. إن كان نفس الجهاز الذي عليه ال SW سيكون هو المزود لهذه الخدمة ضع رقم ال IP الذي وضعته للكارت الأخضر في الخطوة رقم (30).

– Secondary DNS: وظيفته نفس وظيفة ال Primary ما عدا هذا يكون إحتياطي في حالة عدم تمكن الأول من العمل يعمل هذا.

– Default Lease (min): ضع عدد الدقائق التي تريد من خلالها جعل كل الأجهزة المربوطة بهذا السيرفر تعمل إعادة طلب ل IP جديد. أي مثلا لو كانت 60 دقيقة يعني بعد ساعة سيقوم الجهاز الذي رقمه مثلا: 100.0.0.121 بطلب الحصول على IP جديد لأنه يكون ال IP هذا قد أنتهى الزمن المخصص له للعمل على هذا الجهاز وهكذا.

– Max Lease (min): ضع هذه القيمة والتي تمثل أعلى عدد من الدقائق قبل إعادة الطلب ل IP جديد. أضغط على OK للإستمرار.

(40) الآن ستظهر لك شاشة جديدة تطلب منك تحديد كلمة سر password للمستخدم “admin” لكي تتمكن من خلاله الدخول على النظام من خلال المتصفح Web Browser.

Password: ضع كلمة السر هنا

Again: ضع نفس كلمة السر السابقة هنا.

لا تنسى هذه الكلمة السرية والأسم وأضغط الآن على OK للإستمرار.

(41) الآن ستظهر لك شاشة جديدة تطلب منك تحديد كلمة سر password للمستخدم “root” لكي تتمكن من خلاله الدخول على النظام من خلال سطر الاوامر Command Line أو التيرمينال Terminal.

Password: ضع كلمة السر هنا

Again: ضع نفس كلمة السر السابقة هنا.

لا تنسى هذه الكلمة السرية والأسم وأضغط الآن على OK للإستمرار.

(42) الآن ستظهر لك شاشة جديدة تطلب منك تحديد كلمة سر password للمستخدم “setup” لكي تتمكن من خلاله الدخول على برنامج التنصيب الخاص بالنظام.

Password: ضع كلمة السر هنا

Again: ضع نفس كلمة السر السابقة هنا.

لا تنسى هذه الكلمة السرية والأسم وأضغط الآن على OK للإستمرار.

(43) الآن ستظهر لك رسالة تخبرك بإنتهاء عملية التنصيب. أضغط على OK لكي يعمل إعادة تشغيل للجهاز.

(44) بعد إعادة التشغيل ستظهر لك شاشة فقط أضغط على Enter لكي يقوم الجهاز بتحميل النظام.

(45) الآن سيأخذك الى شاشة الدخول على النظام من خلال التيرمينال أو الشيل Terminal أو ال Shell كما يلي:

Smoothwall login:

— أدخل الأسم المراد وكلمة السر للدخول على النظام —

(46) الآن من أي جهاز على الشبكة نفسها ومن خلال أي متصفح Browser أدخل على الرابط التالي:

```
http://Green_NIC_Card_IP_Address:81
```

مثلا:

```
http://100.110.10.17:81
```

أتمنى أن يكون الموضوع حاز على رضى وإعجاب الجميع وأخص بالذكر طبعا اخي الحبيب سامر [GreyHunter](http://grey-hunter.com) وأتمنى أخواني أن تعذروني على التقصير معكم جميعا ولكن ظروف الدراسة والعمل ولهذا لم أجد الوقت الكبير ﻷتفرغ به لكم …

**للنقاش فيه** —> [هنا](http://www.linuxac.org/forum/showthread.php?t=590)

ودمتم …
