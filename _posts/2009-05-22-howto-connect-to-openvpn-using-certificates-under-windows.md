---
title: Howto Connect to OpenVPN using Certificates under Windows
date: 2009-05-22 00:34:45 -0500
categories:
- Networks
- Security
- Windows
tags:
- appliance
- certificates
- cisco
- cmd
- crt
- csr
- firewalls
- gnulinux
- ipsec
- key
- l2tp
- openvpn
- ovpn
- ping
- pptp
- pre-shared-key
- ubuntu
- verisign
- vpn
permalink: /2009/05/22/howto-connect-to-openvpn-using-certificates-under-windows/
reading_time: 3
---
السلام عليكم ورحمة الله وبركاته

هذا الأسبوع كان كل شغلي على IPSec والـ VPN’s … بصراحة تعقدت من كثر الخيارات والإختلافات بأنواعهم وطرق الحماية التي يقدمها كل نوع … قرأت عن مختلف البروتوكولات PPTP و L2TP والقليل عن النوع الخاص بشركة cisco … جميع ما تعلمته وطبقته بإذن الله سأبدأ بالكتابة عنه بالتدريج حبة حبة … سأبدأ بطرق الإتصال بهذه الأنواع من الخوادم أو الـ Hardware وبالأخير إن شاء الله سأشرح طريقة تركيب [OpenVPN](http://openvpn.org) لمن لا يملكها من الأساس … وكيفية عمل تقوية لها وغيرها من الأمور التي ربما يستفيد منها أحد …

أول شرح والذي هو هذا الذي تقرؤونه هو جاهز وقمت بالأسبوع هذا بعمله كشرح بسيط للموظفين بالشركة كيف يقومون بالإتصال بخادم [OpenVPN](http://openvpn.org) من خلال الويندوز بإستعمال برنامج OpenVPN GUI  الخاص بالويندوز (كم هم محترمين جماعة المصادر الحرة لم يقوموا بإحتكار الأمر على جنو/لينوكس بل هو متاح للجميع) … لأن جميعهم الى حد الآن لا يعرف يستعمل جنو/لينوكس ولكنهم صعقوا من إمكانياته وبعضهم أخذ مني نسخة Ubuntu 9.04 وقام بتركيبه … وساعمل لهم دورات بين الحين والآخر على إستعماله لانهم فعلا يستعملون بالوقت الحالي الكثير من برامج المصادر الحرة ولا يستعملون الأب الروحي لهذه المصادر GNU/Linux …

**ملاحظة:** هذه الطريقة هي لعمل إعدادات للإتصال بـ VPN تستعمل Certificates ولا تعمل بواسطة pre-shared key والتي سأقوم بشرحها ولكن على Hardware Firewall Appliance والذي يسمح بعمل IPSec VPN لاحقاً إن شاء الله … أو ممكن شرحها عندما أشرح تنصيب الـ [OpenVPN Server](http://openvpn.org) …

المهم الطريقة بسيطة جداً يا شباب كل الي عليكم تعملوه بالبداية هو تحميل البرنامج [OPEN VPN Client](http://openvpn.se/files/install_packages/openvpn-2.0.9-gui-1.0.3-install.exe) من [الموقع الرسمي](http://openvpn.se/) لهذه الأداة … وبعد ذلك قم بتركيبها وطريقة تركيبها سهلة جداً ومعروفة للجميع Next Next Next ومن ثم Finish … بعد ذلك أذهب الى:

Start > Programs > OpenVPN > Open Configuration File Directory

سيفتح لك المجلد الرئيسي للإعدادات والذي هو

C:\Program Files\OpenVPN\config

قم بنسخ جميع الـ Certificates والمفاتيح الخاصة بإتصالك، وأيضاً ملف الإعدادات الخاص بإتصالك الى هذا المجلد … هذه الملفات تتظمن:

User Certificate والتي هي بالغالب بإسمك وتنتهي بـ .crt

User [Certificate signing request](http://en.wikipedia.org/wiki/Certificate_signing_request) والتي هي أيضاً بالغالب نفس الإسم السابق ولكن تنتهي بـ .csr

User Key والذي هو المفتاح الخاص بالمستخدم وينتهي بـ .key

[Certificate authority](http://en.wikipedia.org/wiki/Certificate_Authority) التي قامت بتوقيع هذه الشهادات (هذا إن كانت الشهادات لديك موقعة من طرف موثوق مثل Verisign وهكذا) عندي كلهم موقعين والحمد لله ولذلك يجب وضعها بالمجلد وتكون بالغالب إسم الشركة وتنتهي أيضاً بـ .crt

أيضا لا تنسى المفتاح والشهادة حق الخادم الذي تشبك عليه … وبالأخير الملف الخاص بالإعدادات والذي يكون بالغالب .ovpn … يعني عندك ما شاء الله تشكيلة من الملفات :)

الآن قم بتشغيل البرنامج (هذا إن لم يكن قد عمل لوحده بعد التثبيت) … وقم بعمل ضغطة يمين عليه كما في الصورة:

![](http://binary-zone.com/images/firewall/openvpn-win-gui.png)

وبعد ذلك قم بإختيار شبكة الـ VPN التي تريد الإتصال بها (في حالة لديك أكثر من واحدة) وأضغط على Connect … بعد ذلك أنتظر القليل ليقول لك بإنه تمت العملية بنجاح …

الآن للتأكد من ذلك، أفتح طرفية cmd في الويندوز وقم بعمل ping على أحد الأجهزة التي تعرف بإنها موجودة على الشبكة هناك …

وهكذا إنتهينا من عمل الإتصال بواسطة الويندوز … سنشرح في الموضوع القادم على جنو/لينوكس كيف يتم ذلك وطرق عمل ذلك لانه يوجد اكثر من طريقة … وحتى على الويندوز يوجد طرق متعددة على فكرة …

بالتوفيق لكم …
