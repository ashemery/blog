---
title: "HOWTO Connect to OpenVPN using GNOME Network Manager"
date: 2009-05-22 01:45:55 -0500
categories: ["Linux Security", "Networks", "Security"]
tags: ["GNOME", "Network Manager", "VPN"]
permalink: "/2009/05/22/howto-connect-to-openvpn-using-gnome-network-manager/"
reading_time: 3
---

السلام عليكم ورحمة الله وبركاته

في هذا الموضوع سنقوم بالتعرف على كيفية الإتصال بالـ VPN بإستعمال برنامج GNOME Network Manager … البرنامج هذا والذي هو موجود بأعلى الشاشة لديك على اليمين وعلى شكل شاشتين كمبيوتر يحتوي على صفحة خاصة بالإتصال بالـ VPN ولكنه يحتاج الى إضافات معينة لكي يتفعل … الآن في حالتنا نريد الإتصال بشبكة OpenVPN ولهذا سنقوم بإضافة الإضافة:

sudo apt-get install network-manager-openvpn

أما إن كنت تريد الإتصال بشبكة VPN من نوع Cisco، فقم بإضافة:

sudo apt-get install network-manager-vpnc

ولو كنت تريد الإتصال بشبكة VPN من نوع PPTP، قم بإضافة:

sudo apt-get install network-manager-pptp

**ملاحظة:** سأختصر في باقي الموضوع عبارة Network Manager بـ NM.

الآن أضغط على أيقونة الـ NM وقم بإختيار VPN Connections ومن ثم Configure VPN كما في الصورة:

![](/assets/img/posts/2009/vpn-linux-nm1.jpeg)

![](/assets/img/posts/2009/vpn-linux-nm2.jpeg)

الآن بما إنه لدينا الإعدادات جاهزة في ملف ovpn كما رأينا في الموضوع السابق، فكل ما عليك فعله هو عمل import. لعمل ذلك اضغط على زر import وقم بإختيار الملف الذي ينتهي بـ ovpn وسيكون كل شيء تمام وجاهز …

في حالة لم تعمل هذه الطريقة بشكل صحيح وتريد عملها بشكل يدوي؟ كل ما عليك فعله هو الضغط على Add ومن ثم إختيار نوع الشبكة والتي هنا هي OpenVPN كما في الصورة:

![](/assets/img/posts/2009/vpn-linux-nm3.jpeg)

الآن ضع أسم لهذا الإتصال مثلاً انا اخترت BinaryVPN ضع ما تريد انت. بعد ذلك قم بوضع الـ IP الخاص بالـ Gateway الذي ستشبك عليه، وقم بإختيار Certificates كما في الصورة وذلك لأنني أستعمل الشهادات. وأختر الشهادة الخاصة بالمستخدم الذي تريده، والشهادة الخاصة بالـ CA والمفتاح الخاص بك. وأخيراً ضع الكلمة السرية التي تستعملها للمفتاح، هذا إن كنت تستعمل كلمة سرية على المفتاح.

![](/assets/img/posts/2009/vpn-linux-nm4.jpeg)

الآن أضغط على صفحة IPv4 Settings وقم بوضع الـ Method:

Automatic (VPN) addresses only

ومن ثم أضغط على Routes وقم بوضع صح على:

Ignore automatically obtained routes

إذا لم تقم بإختيارها لن تستطيع الإتصال بالأنترنت وذلك لأنه كل الحزم ستمر وتذهب الى الشبكة VPN … شغلها أحسنلك :)

كما في الصورة:

![](/assets/img/posts/2009/vpn-linux-nm5.jpeg)

الآن أرجع للصفحة الأولية وأختر Advanced، ومن ثم أذهب الى صفحة Certificates وقم بإختيار نوع التشفير المستعمل وأيضاً قم بإختيار المفتاح الخاص بالخادم VPN، كما في الصورة:

![](/assets/img/posts/2009/vpn-linux-nm6.jpeg)

الآن أضغط OK لحفظ الإعدادات وأخرج من صفحة إعداد الـ VPN وأذهب الى NM مرة أخرى وأضغط عليه وأذهب الى VPN Connections وقم بإختيار الشبكة التي عملناها وأنتظر بعض الوقت كما في الصورة:

![](/assets/img/posts/2009/vpn-linux-nm7.jpeg)

سيظهر لك إشارة “قفل” على NM توضح بإنه تم الإتصال بهذه الشبكة. في حالة كان هناك خلل سيظهر لك رسالة بذلك، ولمعرفة الخلل:

sudo tail -f /var/log/syslog /var/log/messages

وأنظر ما هو الخلل وحاول تحله، ولكن بالعادة لن يكون هناك إذا كانت إعدادت الخادم صح مثل الي عندي وكنت أخترت الخيارات صح، إلا إنه ممكن تظهر لك مشكلة في التصاريح التي على الشهادات والمفاتيح التي عندك، ولهذا يفضل أن تكون كلها مسموح قرائتها والتعديل وتشغيلها من قبل صاحبها فقط …

إن شاء الله في الدرس القادم، سأشرح كيفية الإتصال بأكثر من شبكة VPN من خلال الويندوز وبعدها من خلال جنو/لينوكس، لأن NM في جنو/لينوكس لا يدعم الإتصال سوى بواحدة في المرة الواحدة …

بالتوفيق لكم …
