---
title: HOWTO change nmap’s default host discovery ports
date: 2009-04-22 15:35:16 -0500
categories:
- Firewalls
- Footprinting
tags:
- host-discovery
- nmap
- probe
- tcp
- udp
permalink: /2009/04/22/howto-change-nmaps-default-host-discovery-ports/
reading_time: 2
---
السلام عليكم ورحمة الله وبركاته

نحن نعلم بإنه nmap تسمح لك بتغيير المنافذ المراد إستعمالها في إكتشاف الأجهزة عندما نستعمل أحد طرق الـ Host Discovery بواسطة سطر الأوامر … مثلاً بالنسبة لإستعمال TCP SYN ستكون موجهة بالأساس الى المنفذ 80 … ولكن يمكن تغييرها مثلاً الى 110 من خلال الأمر التالي:

nmap -sP -PS110 arabnix.com

هنا قمنا بإستعمال TCP SYN Ping على الهدف والذي كان في مثالنا هذا arabnix.com … طبعاً نفس الشيء لو كنت تريد إستعمال UDP Ping مثلاً بدل من TCP … حيث UDP يستعمل منفذ أساسي رقمه 31338 … وسبب إستعمال هذا المنفذ هو متعمد وذلك لكي يحصل على ICMP Port unreachable من الطرف الآخر وهذا يكفي لمعرفة إذا كان الجهاز المستهدف حي أم لا …

الآن لتغيير هذا المنفذ الأساسي من خلال سطر الأوامر، سنقوم به كالتالي:

nmap -sP -PU4500 arabnix.com

طيب لو نفرض إنت مو حاب كل مرة تروح تغيير الرقم الأساسي سواءاً لـ TCP أو UDP … ماذا ستفعل؟

الحل إنك قبل أن تقوم بتركيب البرنامج nmap (من المصدر طبعاً) أن تحرر الملف nmap.h وتبحث عن المتغيير الخاص بالـ TCP والذي هو:

DEFAULT_TCP_PROBE_PORT_SPEC

وتقوم بتغييره من 80 الى الرقم الذي تراه مناسب لك … وبالنسبة للـ UDP فإنك سترى المتغيير الخاص به بأسفل منه مباشرة والذي هو:

DEFAULT_UDP_PROBE_PORT_SPEC

غييره من 31338 الى ما يناسبك أيضاً … وبعد ذلك لا تنسى تعمل Configure و Make و Make Install للبرنامج  ::bgrim:: الآن لن تحتاج الى تغيير المنفذ الى 110 مثلاً لأنه أصبح هو الأساسي ولكنك ستغييره إذا كنت تريد غير ذلك …

المزيد حول nmap في الطريق …
