---
title: "كيفية إعادة تشغيل Linux Box من خلال المفاتيح السحرية SysRq"
date: 2008-10-16 10:00:40 -0500
categories: ["Kernel"]
permalink: "/2008/10/16/linux-magic-sysrq-keys/"
reading_time: 2
---

السلام عليكم ورحمة الله وبركاته

بعض الأحيان/نادراً حسب طريقة إستخدامك للجهاز وما هي البرامج التي تشغلها عليه (معاً) فإن الجهاز ربما يعلق ويصبح في حالة لا يستقبل منك الأوامر (ما عاد يخاف منك، وما عاد يطيع أوامرك :))، فالحل حينها هو إستعمال الأوامر السحرية التي تم بناءها في داخل نواة النظام لتسمح لك بعمل إعادة تشغيل للنظام من دون الحاجة الى الضغط على مفتاح إعادة التشغيل الموجود على الجهاز Case نفسه … وأيضاً تستطيع عمل Sync للبيانات للأقراص الصلبة وذلك لكي لا تذهب أو تضرب (ربما) بعض البيانات التي قد يكون سببها عملية إعادة التشغيل هذه …

بالبداية لنرى هل النواة عندنا تدعم هذه الطريقة أم لا:

```
cat /proc/sys/kernel/sysrq
```

إذا كان الجواب هو “0” فهذا يعني بإن الأوامر السحرية هذه غير مفعلة، وإذا كان الجواب “1” يعني هي مفعلة … طيل لو غير مفعلة عادي جداً لنقوم بتفعيلها:

```
echo 1 > /proc/sys/kernel/sysrq
```

ولكن مع إعادة التشغيل سيذهب هذا التعديل الذي قمنا به ولهذا أفضل نعمل التالي:

```
echo "kernel.sysrq = 1" >> /etc/sysctl.conf
```

وبعد ذلك نفذ:

```
sysctl -p
```

الآن بعد أن قمنا بتفعيلها، يمكننا إستخدام هذه الأوامر والتي هي على النحو التالي:

– الضغط على المفاتيح: Alt + SysRq + E تعمل إنهاء لجميع العمليات Processes بإستثناء init.

– الضغط على المفاتيح: Alt + SysRq + I تعمل قتل لجميع العمليات Processes بإستثناء init.

– الضغط على المفاتيح: Alt + SysRq + S تعمل تزامن للقرص.

– الضغط على المفاتيح: Alt + SysRq + U تعمل إعادة mount لجميع أنظمة الملفات filesystems ولكن بحالة القراءة فقط read only.

– الضغط على المفاتيح: Alt + SysRq + B تعمل إعادة تشغيل للجهاز.

أهم شيء عندما تريد عمل إعادة تشغيل مثلاً، قم بتطبيق عملية التزامن وأعطي الأمر بعض الوقت ليتنفذ ومن ثم قم بعمل remount لنظام الملفات وبعدها أعمل إعادة التشغيل.

**ملاحظة مهمة:** المفتاح SysRq هو نفسه المفتاح Print Screen أو PrtScn ::20

الموضوع مذكور بتفاصيل وخيارات أكثر في الويكيبيديا: [أضغط هنا](http://en.wikipedia.org/wiki/Magic_SysRq_key)

ودمتم بود …
